<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AJ Lab Universal Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Nunito:wght@900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00ffcc; --bg: #f8f9fa; --dark-card: #1c2128; --text: #333; }
        body { background-color: var(--bg); font-family: 'Cairo', sans-serif; margin: 0; padding: 0; color: var(--text); }
        .header { background: linear-gradient(135deg, #1a1a1a, #333); color: white; padding: 20px; text-align: center; border-radius: 0 0 25px 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .logo { font-family: 'Nunito', sans-serif; font-size: 2.2rem; color: var(--primary); margin: 0; }
        
        /* Ø¨Ø§Ù†Ø± Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø°ÙƒÙŠ - ÙÙŠØ¯ÙŠÙˆ ÙˆØµÙˆØª Ù„Ø§ÙŠÙ */
        .ai-banner { background: white; margin: 15px; padding: 20px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); display: flex; flex-direction: column; gap: 15px; border: 2px solid var(--primary); }
        .live-status { background: #e0fbf6; color: #00a884; padding: 5px 15px; border-radius: 50px; font-weight: bold; font-size: 0.8rem; align-self: flex-start; }
        .video-container { width: 100%; height: 200px; background: #000; border-radius: 15px; overflow: hidden; display: none; position: relative; }
        video { width: 100%; height: 100%; object-fit: cover; }
        
        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (50 Ø²Ø±Ø§Ø± ÙÙ†ÙŠ) */
        .section-title { padding: 0 20px; font-weight: bold; color: #666; font-size: 0.9rem; }
        .main-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 15px; }
        .grid-item { background: white; border-radius: 15px; padding: 15px 5px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.03); cursor: pointer; transition: 0.2s; border: 1px solid #eee; }
        .grid-item:active { transform: scale(0.9); background: #f0f0f0; }
        .grid-item .icon { font-size: 1.8rem; margin-bottom: 8px; display: block; }
        .grid-item .label { font-size: 0.7rem; font-weight: bold; line-height: 1.2; display: block; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø¯ÙˆØ¯ */
        #aiResponse { margin: 15px; padding: 15px; background: var(--dark-card); color: white; border-radius: 15px; display: none; border-right: 5px solid var(--primary); font-size: 0.9rem; }
        
        .controls { display: flex; justify-content: space-around; padding: 10px; }
        .btn-action { padding: 12px 25px; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; font-family: 'Cairo'; }
        .btn-ai { background: var(--primary); color: #1a1a1a; width: 80%; margin: 0 auto; display: block; }
    </style>
</head>
<body>

    <div class="header">
        <h1 class="logo">AJ Lab Universal Pro</h1>
        <p style="font-size: 0.8rem; margin-top: 5px;">Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙØ§Ø¨Ø±ÙŠÙƒØ§ | Ø£Ø³Ø·Ù‰ ÙƒÙ„ Ø§Ù„ØµÙ†Ø¹Ø§Øª</p>
    </div>

    <div class="ai-banner">
        <div class="live-status">â— Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ø§ÙŠÙ</div>
        <div class="video-container" id="vidBox"><video id="video" autoplay muted></video></div>
        <textarea id="textInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¹Ø·Ù„ Ø£Ùˆ Ø§Ø¶ØºØ· Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†.." style="width: 100%; border: none; outline: none; font-family: 'Cairo';"></textarea>
        <button class="btn-action btn-ai" onclick="askMasterAI()">Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´Ø®ÙŠØµ Ø§Ù„Ø°ÙƒÙŠ</button>
        <div class="controls">
            <button onclick="startCamera()" title="ÙÙŠØ¯ÙŠÙˆ">ğŸ“·</button>
            <button onclick="startVoice()" title="ØµÙˆØª">ğŸ¤</button>
            <button onclick="document.getElementById('fileInput').click()" title="ØµÙˆØ±Ø©">ğŸ–¼ï¸</button>
            <input type="file" id="fileInput" style="display:none" onchange="handleImage(this)">
        </div>
    </div>

    <div id="aiResponse"></div>

    <p class="section-title">Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„Ø¥ØµÙ„Ø§Ø­</p>
    <div class="main-grid" id="grid50"></div>

    <script>
        const API_KEY = "AIzaSyDSEanlwCKhNGvp4zwGksuk5Vgr_qMZ0TM";
        const categories = [
            {n:"Ù…ÙˆØªÙˆØ± Ø¨ÙˆÙ„Ø³Ø§Ø±", i:"ğŸï¸"}, {n:"Ø¨ÙˆÙƒØ³Ø± 150", i:"âš™ï¸"}, {n:"ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ØµÙŠÙ†ÙŠ", i:"âš¡"}, {n:"ØªÙŠÙ„ ÙØ±Ø§Ù…Ù„", i:"ğŸ›‘"},
            {n:"Ù…ÙƒÙ†Ø© Ù‡Ø§ÙŠØ¯Ù„Ø¨ÙŠØ±Ø¬", i:"ğŸ“ "}, {n:"Ø®Ø¨Ø§ÙŠØ§ Ø§Ù„Ø£ÙˆÙØ³Øª", i:"ğŸ¨"}, {n:"ÙƒÙ‡Ø±Ø¨Ø§Ø¡ Ø§Ù„Ù…ÙƒÙ†", i:"ğŸ”Œ"}, {n:"Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©", i:"ğŸ› ï¸"},
            {n:"ØºØ³Ø§Ù„Ø© ØªÙˆØ´ÙŠØ¨Ø§", i:"ğŸ§º"}, {n:"Ø³Ø®Ø§Ù† ØºØ§Ø²", i:"ğŸ”¥"}, {n:"Ø«Ù„Ø§Ø¬Ø© Ù†ÙˆÙØ±ÙˆØ³Øª", i:"â„ï¸"}, {n:"ØªÙƒÙŠÙŠÙ Ø³Ø¨Ù„ÙŠØª", i:"ğŸŒ¬ï¸"},
            {n:"Ø³ÙŠØ³ØªÙ… POS", i:"ğŸ“Š"}, {n:"Ø¥Ø¯Ø§Ø±Ø© Ù…Ø®Ø§Ø²Ù†", i:"ğŸ“¦"}, {n:"Ù‚Ø§Ø±Ø¦ Ø¨Ø§Ø±ÙƒÙˆØ¯", i:"ğŸ·ï¸"}, {n:"Ù…ÙŠØ²Ø§Ù† Ø°ÙƒÙŠ", i:"âš–ï¸"},
            {n:"ØªØ¬Ù‡ÙŠØ² ØµÙŠØ§Ù†Ø©", i:"ğŸ§°"}, {n:"Ø¹Ø¯Ø© Ù…Ø·Ù„ÙˆØ¨Ø©", i:"ğŸ”§"}, {n:"Ø­Ù„ÙˆÙ„ Ø³Ø±ÙŠØ¹Ø©", i:"ğŸ’¡"}, {n:"ÙÙŠØ¯ÙŠÙˆ Ø´Ø±Ø­", i:"ğŸ¥"},
            {n:"Ø¯Ø¨Ø±ÙŠØ§Ø¬ Ù‡Ù†Ø¯ÙŠ", i:"â›“ï¸"}, {n:"ÙƒØ±Ø¨Ø±Ø§ØªÙŠØ±", i:"â›½"}, {n:"Ø¹Ù…Ø±Ø© Ù…ÙˆØªÙˆØ±", i:"ğŸ”©"}, {n:"ØªØºÙŠÙŠØ± Ø²ÙŠØª", i:"ğŸ›¢ï¸"},
            {n:"ØºØ³Ø§Ù„Ø© Ø£Ø·Ø¨Ø§Ù‚", i:"ğŸ½ï¸"}, {n:"Ù…ÙƒÙˆØ§Ø© Ø¨Ø®Ø§Ø±", i:"ğŸ’¨"}, {n:"Ø®Ù„Ø§Ø· ÙØ±ÙŠØ´", i:"ğŸŒªï¸"}, {n:"Ù…ÙŠÙƒØ±ÙˆÙˆÙŠÙ", i:"ğŸ±"},
            {n:"Ù…ÙƒÙ†Ø© Ø­Ù„Ø§Ù‚Ø©", i:"âœ‚ï¸"}, {n:"Ø±Ø§ÙˆØªØ± Ù†Øª", i:"ğŸŒ"}, {n:"Ø´Ø§Ø´Ø© LED", i:"ğŸ“º"}, {n:"Ø±ÙŠØ³ÙŠÙØ±", i:"ğŸ“¡"},
            {n:"ÙƒÙ…Ø¨Ø±ÙˆØ³Ø±", i:"ğŸ’¨"}, {n:"Ù…Ø±ÙˆØ­Ø© Ø³Ù‚Ù", i:"ğŸŒ€"}, {n:"Ø´ÙØ§Ø· Ù…Ø·Ø¨Ø®", i:"ğŸ "}, {n:"Ù…ÙƒÙ†Ø© Ø®ÙŠØ§Ø·Ø©", i:"ğŸ§µ"},
            {n:"Ø·Ù„Ù…Ø¨Ø© Ù…ÙŠØ§Ù‡", i:"ğŸ’§"}, {n:"Ø¨Ø·Ø§Ø±ÙŠØ© Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„", i:"ğŸ”‹"}, {n:"Ø¨ÙˆØ¬ÙŠÙ‡Ø§Øª", i:"ğŸ•¯ï¸"}, {n:"Ù…Ø³Ø§Ø¹Ø¯ÙŠÙ†", i:"ğŸªœ"},
            {n:"Ø·Ø§Ø¨Ø¹Ø© Ù„ÙŠØ²Ø±", i:"ğŸ–¨ï¸"}, {n:"Ø­Ø¨Ø§Ø±Ø© Ø£Ù„ÙˆØ§Ù†", i:"ğŸŒˆ"}, {n:"Ø¯Ø±Ø§Ù… Ø§Ù„Ù…ÙƒÙ†Ø©", i:"âšª"}, {n:"ÙˆØ±Ù‚ Ø·Ø¨Ø§Ø¹Ø©", i:"ğŸ“„"},
            {n:"ØªØ¬Ù‡ÙŠØ² Ø£ÙˆØ±Ø¯Ø±", i:"ğŸ“"}, {n:"Ø­Ø³Ø§Ø¨ Ù…Ø¨ÙŠØ¹Ø§Øª", i:"ğŸ’°"}, {n:"ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ", i:"ğŸ“…"}, {n:"Ø¯Ø¹Ù… ÙÙ†ÙŠ", i:"ğŸ“"},
            {n:"Ø®Ø¨ÙŠØ± ØµÙŠÙ†ÙŠ", i:"ğŸ®"}, {n:"Ø®Ø¨ÙŠØ± Ù‡Ù†Ø¯ÙŠ", i:"ğŸ‘³"}
        ];

        const grid = document.getElementById('grid50');
        categories.forEach(c => {
            const div = document.createElement('div');
            div.className = 'grid-item';
            div.innerHTML = `<span class="icon">${c.i}</span><span class="label">${c.n}</span>`;
            div.onclick = () => { document.getElementById('textInput').value = `Ø¹Ø·Ù„ ÙÙŠ ${c.n}: `; askMasterAI(); };
            grid.appendChild(div);
        });

        async function askMasterAI() {
            const input = document.getElementById('textInput').value;
            const resDiv = document.getElementById('aiResponse');
            resDiv.style.display = "block";
            resDiv.innerText = "Ø§Ù„Ø£Ø³Ø·Ù‰ Ø¨ÙŠÙØ­Øµ Ø§Ù„Ø¹Ø·Ù„ Ù„Ø§ÙŠÙ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ø±... â³";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `Ø£Ù†Øª Ø£Ø³Ø·Ù‰ Ø®Ø¨ÙŠØ± ÙˆØ´Ø§Ø·Ø± Ø¬Ø¯Ø§Ù‹ Ø§Ø³Ù…Ùƒ AJ Lab. ØªØ®ØµØµÙƒ: Ù…ÙŠÙƒØ§Ù†ÙŠÙƒØ§ Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª (Ù‡Ù†Ø¯ÙŠ ÙˆØµÙŠÙ†ÙŠ)ØŒ Ù…ÙƒÙ† Ø·Ø¨Ø§Ø¹Ø© Ù‡Ø§ÙŠØ¯Ù„Ø¨ÙŠØ±Ø¬ØŒ Ø£Ø¬Ù‡Ø²Ø© Ù…Ù†Ø²Ù„ÙŠØ©ØŒ ÙˆØ³ÙŠØ³ØªÙ… POS. Ø±Ø¯ Ø¨Ù„Ù‡Ø¬Ø© Ù…ØµØ±ÙŠØ© Ø¹Ø§Ù…ÙŠØ© ÙÙ†ÙŠØ© ÙˆÙ…Ø®ØªØµØ±Ø© Ø¬Ø¯Ø§Ù‹. Ø­Ù„Ù„ Ø§Ù„Ø¹Ø·Ù„ Ø¯Ù‡: ${input}. Ø§Ø°ÙƒØ±: 1- Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø±Ø¬Ø­. 2- Ø§Ù„Ø¹Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø¨Ø§Ù„Ø¸Ø¨Ø·. 3- Ø®Ø·ÙˆØ© Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ø§Ù„ÙÙ†ÙŠ "Ø§Ù„ÙØ§Ø¨Ø±ÙŠÙƒØ§".` }] }]
                    })
                });
                const data = await response.json();
                const aiText = data.candidates[0].content.parts[0].text;
                resDiv.innerHTML = `<strong>Ø§Ù„Ø®Ù„Ø§ØµØ© Ù…Ù† Ø§Ù„Ø£Ø³Ø·Ù‰:</strong><br>${aiText}`;
                speak(aiText);
            } catch (e) { resDiv.innerText = "ÙÙŠ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø±Ø¨Ø· ÙŠØ§ Ù‡Ù†Ø¯Ø³Ø©ØŒ Ø§ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ÙØªØ§Ø­ ÙˆØ§Ù„Ù†Øª."; }
        }

        function speak(text) {
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'ar-EG';
            window.speechSynthesis.speak(msg);
        }

        function startCamera() {
            const vidBox = document.getElementById('vidBox');
            vidBox.style.display = "block";
            navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {
                document.getElementById('video').srcObject = stream;
            });
        }

        function startVoice() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'ar-EG';
            recognition.onresult = (e) => { document.getElementById('textInput').value = e.results[0][0].transcript; askMasterAI(); };
            recognition.start();
        }
    </script>
</body>
</html>
